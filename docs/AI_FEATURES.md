# AI 기능 가이드

AI Todo Manager의 AI 기반 자연어 처리 기능에 대한 상세 가이드입니다.

---

## 🤖 AI 자연어 할 일 파싱

사용자가 자연스러운 문장으로 입력하면, AI가 자동으로 분석하여 구조화된 할 일 데이터로 변환합니다.

### ✨ 주요 기능

1. **제목 추출**: 핵심 행동을 간결하게 추출
2. **설명 정리**: 세부 사항을 bullet point(•)로 정리
3. **날짜 파싱**: 상대적/절대적 날짜 표현 이해
4. **시간 파싱**: 12시간/24시간 형식 모두 지원
5. **우선순위 판단**: 문맥 기반 자동 판단
6. **카테고리 분류**: 내용 기반 자동 분류

---

## 📝 사용 방법

### 1. 새 할 일 추가 대화상자 열기

메인 페이지에서 "할 일 추가" 버튼을 클릭합니다.

### 2. AI 자연어 입력

대화상자 상단의 **"AI로 빠르게 추가하기"** 섹션에 자연스러운 문장을 입력합니다.

```
예시: "내일 오후 3시까지 중요한 팀 회의 준비하기"
```

### 3. 분석 버튼 클릭 또는 Enter

- **분석** 버튼 클릭
- 또는 **Enter** 키 누름

### 4. 결과 확인 및 수정

AI가 자동으로 아래 폼을 채워줍니다:
- ✅ 제목: "팀 회의 준비"
- ✅ 마감일: 내일 날짜
- ✅ 마감 시간: 15:00
- ✅ 우선순위: high
- ✅ 카테고리: ["업무"]

필요시 추가로 수정할 수 있습니다.

### 5. 추가 버튼 클릭

최종 확인 후 "추가" 버튼을 클릭하여 할 일을 저장합니다.

---

## 💡 입력 예시

### 날짜 표현

#### 상대적 날짜
- ✅ "**오늘** 저녁까지 장보기"
  - due_date: 오늘, due_time: 18:00
  
- ✅ "**내일** 아침 9시 출근 준비"
  - due_date: 내일, due_time: 09:00
  
- ✅ "**모레** 점심 약속 잡기"
  - due_date: 모레, due_time: 12:00
  
- ✅ "**다음 주 월요일**까지 보고서 제출"
  - due_date: 다음 월요일, due_time: 09:00

#### 절대적 날짜
- ✅ "**1월 15일** 친구 생일 선물 사기"
  - due_date: 2026-01-15
  
- ✅ "**2026년 2월 10일** 출장 준비"
  - due_date: 2026-02-10

---

### 시간 표현

#### 12시간 형식
- ✅ "**오전 9시** 회의"
  - due_time: 09:00
  
- ✅ "**오후 3시** 미팅"
  - due_time: 15:00
  
- ✅ "**저녁 7시** 저녁 약속"
  - due_time: 19:00

#### 24시간 형식
- ✅ "**14시**까지 제출"
  - due_time: 14:00
  
- ✅ "**18:30** 퇴근 후 운동"
  - due_time: 18:30

#### 시간 생략
- ✅ "내일까지 숙제 하기"
  - due_date: 내일, due_time: 09:00 (기본값)

---

### 우선순위 표현

#### 높음 (high)
- ✅ "**긴급**하게 버그 수정"
- ✅ "**중요한** 클라이언트 미팅"
- ✅ "**빨리** 메일 답장하기"
- ✅ "**시급**하게 처리"
- ✅ "**마감 임박** 프로젝트"

#### 보통 (medium)
- ✅ "일상적인 업무 처리"
- ✅ "보통 우선순위로 진행"
- ✅ "일반적인 회의"

#### 낮음 (low)
- ✅ "**여유있게** 책 읽기"
- ✅ "**천천히** 정리하기"
- ✅ "**나중에** 해도 되는 일"

#### 문맥 기반 자동 판단
- ✅ "발표 준비" → high
- ✅ "과제 제출" → high
- ✅ "산책하기" → low
- ✅ "이메일 확인" → medium

---

### 카테고리 분류

#### 업무
- ✅ "회의 준비하기"
- ✅ "보고서 작성"
- ✅ "클라이언트 미팅"
- ✅ "프로젝트 진행"

#### 공부
- ✅ "영어 공부하기"
- ✅ "강의 듣기"
- ✅ "과제 제출"
- ✅ "시험 준비"

#### 건강
- ✅ "헬스장 가기"
- ✅ "조깅하기"
- ✅ "병원 예약"
- ✅ "건강검진"

#### 개인
- ✅ "장보기"
- ✅ "집 청소"
- ✅ "이사 준비"
- ✅ "세금 신고"

#### 취미
- ✅ "영화 보기"
- ✅ "독서"
- ✅ "사진 찍기"
- ✅ "게임하기"

---

## 🎯 복합 예시

### 예시 1: 완전한 입력
```
입력: "내일 오후 3시까지 중요한 팀 회의 준비하기"

출력:
{
  title: "팀 회의 준비",
  description: "",
  due_date: "2026-01-10",
  due_time: "15:00",
  priority: "high",
  category: ["업무"]
}
```

### 예시 1-1: 세부 사항이 있는 입력 ⭐
```
입력: "내일 오후 3시까지 팀 회의 준비. 발표 자료 작성하고 참석자 명단 확인하고 회의실 예약해야 함"

출력:
{
  title: "팀 회의 준비",
  description: "• 발표 자료 작성\n• 참석자 명단 확인\n• 회의실 예약",
  due_date: "2026-01-10",
  due_time: "15:00",
  priority: "high",
  category: ["업무"]
}
```

### 예시 2: 날짜만 있는 경우
```
입력: "다음 주 월요일까지 보고서 작성"

출력:
{
  title: "보고서 작성",
  description: "",
  due_date: "2026-01-13",
  due_time: "09:00",  // 기본값
  priority: "medium",
  category: ["업무"]
}
```

### 예시 3: 우선순위 강조
```
입력: "긴급하게 버그 수정 필요"

출력:
{
  title: "버그 수정",
  description: "",
  due_date: null,
  due_time: null,
  priority: "high",  // "긴급"에서 추출
  category: ["업무"]
}
```

### 예시 4: 여유있는 일
```
입력: "주말에 여유있게 책 읽기"

출력:
{
  title: "책 읽기",
  description: "",
  due_date: "2026-01-11",  // 다음 주말
  due_time: "09:00",
  priority: "low",  // "여유있게"에서 추출
  category: ["취미"]
}
```

### 예시 5: 상세 설명 포함 (Bullet Point) ⭐
```
입력: "내일까지 클라이언트에게 제안서 제출하고 피드백 받기"

출력:
{
  title: "제안서 제출",
  description: "• 클라이언트에게 제안서 전달\n• 피드백 받기",
  due_date: "2026-01-10",
  due_time: "09:00",
  priority: "high",
  category: ["업무"]
}
```

### 예시 6: 복잡한 업무 (Multiple Steps) ⭐
```
입력: "이번 주 금요일까지 프로젝트 최종 발표 준비. PPT 만들고, 데모 영상 녹화하고, 리허설 해야 함"

출력:
{
  title: "프로젝트 최종 발표 준비",
  description: "• PPT 제작\n• 데모 영상 녹화\n• 리허설 진행",
  due_date: "2026-01-10",
  due_time: "09:00",
  priority: "high",
  category: ["업무"]
}
```

---

## 🔧 기술 스택

### AI 모델
- **Google Gemini 2.0 Flash Exp**
  - 빠른 응답 속도
  - 한국어 자연어 처리 우수
  - 날짜/시간 추출 정확도 높음

### 프레임워크
- **AI SDK** (Vercel)
  - `generateObject`: 구조화된 데이터 생성
  - Zod 스키마 기반 타입 안전성
  
### API 구조
```
클라이언트 (TodoForm)
    ↓
POST /api/ai/parse-todo
    ↓
Gemini API (AI SDK)
    ↓
구조화된 데이터 반환
    ↓
폼 자동 채우기
```

---

## ⚙️ 설정

### 환경 변수

`.env.local` 파일에 Google API 키를 추가하세요:

```env
GOOGLE_GENERATIVE_AI_API_KEY=your_google_api_key
```

### API 키 발급

1. [Google AI Studio](https://aistudio.google.com/app/apikey) 접속
2. **"Create API Key"** 클릭
3. 새 프로젝트 생성 또는 기존 프로젝트 선택
4. API 키 복사
5. `.env.local`에 추가

---

## 🐛 문제 해결

### "AI 서비스 설정이 올바르지 않습니다"
- `.env.local` 파일에 `GOOGLE_GENERATIVE_AI_API_KEY` 추가 확인
- 개발 서버 재시작 (`Ctrl+C` → `npm run dev`)

### "API 사용량 한도에 도달했습니다"
- Google Cloud Console에서 할당량 확인
- 무료 티어: 월 60 requests/minute
- 유료 플랜 고려

### "네트워크 오류가 발생했습니다"
- 인터넷 연결 확인
- Google API 서버 상태 확인
- 방화벽/프록시 설정 확인

### 날짜가 잘못 파싱됨
- 더 명확한 날짜 표현 사용
  - 나쁨: "다음에"
  - 좋음: "다음 주 월요일"
- 절대적 날짜 사용 권장
  - "1월 15일", "2026-01-15"

### 우선순위가 잘못 판단됨
- 명시적인 우선순위 키워드 사용
  - "긴급", "중요", "여유있게"
- 수동으로 수정 가능

---

## 💰 비용

### Google Gemini API 가격 (2026년 1월 기준)

#### Gemini 2.0 Flash (Experimental)
- **무료 티어**:
  - 15 RPM (분당 요청)
  - 1,500 RPD (일당 요청)
  - 100만 토큰/일
  
- **유료 티어** (Pay-as-you-go):
  - 입력: $0.075 / 100만 토큰
  - 출력: $0.30 / 100만 토큰

### 예상 비용

1회 할 일 파싱 (평균):
- 입력 토큰: ~300 토큰
- 출력 토큰: ~100 토큰
- 비용: **약 $0.00005** (0.005원)

월 1,000개 할 일 파싱:
- 비용: **약 $0.05** (약 65원)

**결론**: 개인 사용은 무료 티어로 충분합니다!

---

## 🔒 보안 및 개인정보

### API 키 보호
- ✅ `.env.local` 파일 사용 (Git에 포함 안됨)
- ✅ Next.js API Route를 통한 서버 측 호출
- ✅ 클라이언트에 API 키 노출 방지

### 데이터 처리
- ✅ 사용자 입력만 AI로 전송
- ✅ 개인 식별 정보(PII) 최소화
- ✅ Google 개인정보 보호정책 준수

---

## 📊 성능

### 응답 시간
- 평균: **1-2초**
- 최대: **5초**

### 정확도
- 날짜 파싱: **~95%**
- 시간 파싱: **~90%**
- 우선순위 판단: **~85%**
- 카테고리 분류: **~80%**

### 최적화 팁
- 명확한 표현 사용
- 키워드 포함 ("긴급", "내일", "오후 3시")
- 한 문장에 하나의 할 일만 입력

---

## 🚀 향후 개발 계획

- [ ] 여러 할 일 한 번에 파�ing
- [ ] 음성 입력 지원
- [ ] 이미지에서 할 일 추출
- [ ] 사용자 학습 기반 개인화
- [ ] 다국어 지원 (영어, 일본어 등)

---

## 📚 참고 자료

- [Google AI Studio](https://aistudio.google.com/)
- [AI SDK 문서](https://sdk.vercel.ai/docs)
- [Gemini API 문서](https://ai.google.dev/docs)

---

## 💬 피드백

AI 파싱 기능에 대한 피드백이나 개선 제안이 있으시면 이슈를 등록해주세요!
